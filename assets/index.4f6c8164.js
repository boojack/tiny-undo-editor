import{d as u,c as p,a as i,b as g,t as f,n as $,p as m,e as h,o as l,r as x,f as v,g as I,T as b,h as E,i as w,j as T,F as C,k as L,l as k,m as S}from"./vendor.8c3d5738.js";const N=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))t(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&t(c)}).observe(document,{childList:!0,subtree:!0});function a(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerpolicy&&(s.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?s.credentials="include":o.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function t(o){if(o.ep)return;o.ep=!0;const s=a(o);fetch(o.href,s)}};N();var y=(e,n)=>{for(const[a,t]of n)e[a]=t;return e};const R=u({name:"ActionContainer",props:{action:{required:!0,type:Object},index:Number,isActive:Boolean},emits:["click"],methods:{handleActionClick(){this.$emit("click",this.index)}}}),A=e=>(m("data-v-493c41f2"),e=e(),h(),e),B={class:"value-text"},F=A(()=>i("span",{class:"split-text"},"\u201C",-1)),O=A(()=>i("span",{class:"split-text"},"\u201D",-1)),D={class:"date-text"};function j(e,n,a,t,o,s){return l(),p("div",{class:$(`action-container ${e.isActive?"active":""}`),onClick:n[0]||(n[0]=(...c)=>e.handleActionClick&&e.handleActionClick(...c))},[i("p",B,[F,g(f(e.action.value),1),O]),i("span",D,f(new Date(e.action.timestamp).toLocaleString()),1)],2)}var q=y(R,[["render",j],["__scopeId","data-v-493c41f2"]]);const M=u({name:"TinyEditor",components:{ActionContainer:q},setup(){const e=x({actions:[],currentIndex:0}),n=v(null),a=v(null);let t=null;return I(()=>{n.value&&(t=new b(n.value,{interval:2e3}),e.actions=t.getActions(),t.subscribe((r,d)=>{e.actions=[...r],e.currentIndex=d}))}),E(()=>{t==null||t.destroy()}),w(()=>{var r;(r=a.value)==null||r.scrollTo({left:400*e.currentIndex,top:0,behavior:"smooth"})}),{state:e,editorEl:n,actionsContainerEl:a,handleActionClick:r=>{for(;e.currentIndex!==r;)e.currentIndex>r?t==null||t.runUndo():t==null||t.runRedo()},runUndo:()=>{t==null||t.runUndo()},runRedo:()=>{t==null||t.runRedo()}}}}),_=e=>(m("data-v-478709ea"),e=e(),h(),e),P=_(()=>i("h1",{class:"text title-text"},"\u270D\uFE0F Tiny Undo Editor",-1)),U=_(()=>i("p",{class:"text tip-text"},"Just a simple example to show how tiny-undo works.",-1)),V={class:"editor-container"},z={class:"toolbar-container"},J={ref:"editorEl",placeholder:"Write something right here..."},K=_(()=>i("p",{class:"text tip-text"},"Undo/redo text history:",-1)),W={class:"actions-wrapper",ref:"actionsContainerEl"};function G(e,n,a,t,o,s){const c=T("ActionContainer");return l(),p(C,null,[P,U,i("div",V,[i("div",z,[i("span",{class:"btn",onClick:n[0]||(n[0]=(...r)=>e.runUndo&&e.runUndo(...r))},"undo"),i("span",{class:"btn",onClick:n[1]||(n[1]=(...r)=>e.runRedo&&e.runRedo(...r))},"redo")]),i("textarea",J,null,512)]),K,i("div",W,[(l(!0),p(C,null,L(e.state.actions,(r,d)=>(l(),k(c,{key:r.timestamp,index:d,action:r,isActive:e.state.currentIndex===d,onClick:e.handleActionClick},null,8,["index","action","isActive","onClick"]))),128))],512)],64)}var H=y(M,[["render",G],["__scopeId","data-v-478709ea"]]);const Q=u({setup(e){return(n,a)=>(l(),k(H))}});S(Q).mount("#app");
