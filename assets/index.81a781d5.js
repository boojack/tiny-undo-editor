import{d as u,c as p,a as i,t as _,n as k,o as l,r as A,b as f,e as y,T as b,f as g,g as $,h as I,F as m,i as E,p as x,j as L,k as v,l as T}from"./vendor.db03b08c.js";const w=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))t(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&t(c)}).observe(document,{childList:!0,subtree:!0});function a(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerpolicy&&(r.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?r.credentials="include":o.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function t(o){if(o.ep)return;o.ep=!0;const r=a(o);fetch(o.href,r)}};w();var h=(e,n)=>{for(const[a,t]of n)e[a]=t;return e};const R=u({name:"ActionContainer",props:{action:{required:!0,type:Object},index:Number,isActive:Boolean},emits:["click"],methods:{handleActionClick(){this.$emit("click",this.index)}}}),S={class:"value-text"},B={class:"date-text"};function N(e,n,a,t,o,r){return l(),p("div",{class:k(`action-container ${e.isActive?"active":""}`),onClick:n[0]||(n[0]=(...c)=>e.handleActionClick&&e.handleActionClick(...c))},[i("p",S,_(e.action.value),1),i("span",B,_(new Date(e.action.timestamp).toLocaleString()),1)],2)}var O=h(R,[["render",N],["__scopeId","data-v-28a0b5b4"]]);const j=u({name:"TinyEditor",components:{ActionContainer:O},setup(){const e=A({actions:[],currentIndex:0}),n=f(null),a=f(null);let t=null;return y(()=>{n.value&&(t=new b(n.value),e.actions=t.getActions(),t.subscribe((s,d)=>{e.actions=[...s],e.currentIndex=d}))}),g(()=>{t==null||t.destroy()}),$(()=>{var s;(s=a.value)==null||s.scrollTo({left:400*e.currentIndex,top:0,behavior:"smooth"})}),{state:e,editorEl:n,actionsContainerEl:a,handleActionClick:s=>{for(;e.currentIndex!==s;)e.currentIndex>s?t==null||t.runUndo():t==null||t.runRedo()},runUndo:()=>{t==null||t.runUndo()},runRedo:()=>{t==null||t.runRedo()}}}}),C=e=>(x("data-v-35303279"),e=e(),L(),e),F=C(()=>i("h1",{class:"text title-text"},"Tiny Undo Editor",-1)),q={class:"editor-container"},D={class:"toolbar-container"},M={ref:"editorEl"},P=C(()=>i("p",{class:"text"},"Undo/redo text history:",-1)),U={class:"actions-wrapper",ref:"actionsContainerEl"};function z(e,n,a,t,o,r){const c=I("ActionContainer");return l(),p(m,null,[F,i("div",q,[i("div",D,[i("span",{class:"btn",onClick:n[0]||(n[0]=(...s)=>e.runUndo&&e.runUndo(...s))},"undo"),i("span",{class:"btn",onClick:n[1]||(n[1]=(...s)=>e.runRedo&&e.runRedo(...s))},"redo")]),i("textarea",M,null,512)]),P,i("div",U,[(l(!0),p(m,null,E(e.state.actions,(s,d)=>(l(),v(c,{key:s.timestamp,index:d,action:s,isActive:e.state.currentIndex===d,onClick:e.handleActionClick},null,8,["index","action","isActive","onClick"]))),128))],512)],64)}var K=h(j,[["render",z],["__scopeId","data-v-35303279"]]);const V=u({setup(e){return(n,a)=>(l(),v(K))}});T(V).mount("#app");
